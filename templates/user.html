<!doctype html>
<html lang="en">
<head>

    <!-- Webpage Title -->
    <title>{{ user_info.profile_name }} | SWEETER</title>
    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <meta property="og:title" content="스위터 - 세상을 달달하게"/>
    <meta property="og:description" content="mini project for Web Plus"/>
    <meta property="og:image" content="{{ url_for('static', filename='ogimg.png') }}"/>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bulma CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.1/css/bulma.min.css">
    <!-- Font Awesome CSS -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Gamja+Flower&family=Stylish&display=swap" rel="stylesheet">
    <link href="{{ url_for('static', filename='mystyle.css') }}" rel="stylesheet">

    <!-- JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.js"></script>
    <script src="{{ url_for('static', filename='myjs.js') }}"></script>
    <script>
        // 로그 아웃 버튼 기능 구현 ( 토큰 삭제 )
        function sign_out() {
            $.removeCookie('mytoken', {path: '/'});
            alert('로그아웃!')
            window.location.href = "/login"
        }
        $(document).ready(function(){
          $(".user_modify_btn").on({
           click:function(){
             $.ajax({
               url:'/user_change',
               type:'post',
               data:{nickname_give:$(".user_nickname").val(), userid_give:$(".user_id").val()},
               success:function(result){
                 alert(result.msg);
               }
             })
           }
         })
        })

    </script>
</head>
<body>
  <a class="button is-dark">
      <strong>회원 정보 변경</strong>
  </a>
  <a onclick="sign_out()" class="button is-light">
      로그아웃
  </a>

  <label for="user_nickname">닉네임</label>
  <input type="text" id="user_nickname" class="user_nickname" value="{{ user_info['nickname'] }}"/>
  <input type="hidden" class="user_id" value="{{ user_info['username'] }}"/>
  <button class="user_modify_btn">정보 변경</button>

  <form action="file_upload" method="POST" enctype="multipart/form-data">
        <input type="file" name="file"/>
        <input type="hidden" name="user_id" value="{{ user_info['username'] }}"/>
        <input type="submit" value="제출하기"/>
    </form>
</nav>
</body>
</html>